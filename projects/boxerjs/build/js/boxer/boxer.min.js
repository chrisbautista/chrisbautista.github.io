!function(e){var t=function(t){function i(t){var i,n=e(t),d=document.createElement("div");d.className="boxer-closeBtn",e(o).find("> div").prepend(d),i=e(".boxer-closeBtn"),o.on("click",function(){n.remove(),e(this).remove(),e(this).off()})}function n(n){var r,a,h,c,u=n.target;return n.preventDefault(),u="A"!==u.nodeName?n.target.parentNode:u,"A"===u.nodeName&&(r=e(u).attr("data-type")||"",e("body").append(e("<div></div>").addClass(t.overlayName)),o=e("."+t.overlayName),outSideContainer=document.createElement("div"),outSideContainer.id="imgContainer",a=d(u,r,function(){outSideContainer.appendChild(a),outSideContainer.className="centered",e(outSideContainer)[0].firstChild.width?(h=e(outSideContainer)[0].firstChild.width,c=e(outSideContainer)[0].firstChild.height):(h=t.width,c=t.height,e(e(outSideContainer)[0].firstChild).css("width",h),e(e(outSideContainer)[0].firstChild).css("height",c)),(h>.7*e(window).width()||c>.7*e(window).height())&&(h=parseInt(h/2),c=parseInt(c/2),e(outSideContainer)[0].firstChild.width=h),e(outSideContainer)[0].firstChild.width=h,i(outSideContainer)}),o.append(outSideContainer),t.beforeShow&&t.beforeShow(),!1)}function d(t,i,n){var d,o,r,a;return d=document.createDocumentFragment(),""===i||"image"===i?(o=document.createElement("img"),o.src=t.href,d.appendChild(o),t.title&&(a=document.createElement("p"),r=document.createTextNode(t.title),a.appendChild(r),d.appendChild(a)),o.addEventListener("load",n)):"ajax"===i&&(o=document.createElement("div"),e(o).load(t.href,function(e,t,i){d.appendChild(o),n(e)})),d}var o,r=t.obj;r.off().on("click",n)};e.fn.boxer=function(i){var n=e.extend({overlayName:"previewOverlay",width:600,height:400},i);return this.filter("div").each(function(){e.each(this.children,function(){t(e.extend({obj:e(this)},n))})}),this}}(jQuery);